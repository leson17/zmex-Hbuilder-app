(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PnLHistory"],{1407:function(t,e,i){},"50d3":function(t,e,i){},5995:function(t,e,i){"use strict";var n=i("adf8"),s=i.n(n);s.a},"71c2":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"head"},[i("div",{staticClass:"back",on:{click:function(e){return e.stopPropagation(),t.goBack(e)}}},[i("span",{staticClass:"left-arrow"})]),i("span",{staticClass:"title"},[t._v(t._s(t.headerTitle))]),"paymentMethod"===t.currentRoute?i("span",{staticClass:"add-payment-method",on:{click:t.addPaymentMethod}},[t._v(t._s(t.$t("AddPaymentMethod")))]):t._e(),"PnLHistory"===t.currentRoute?i("span",{staticClass:"pnl-icon",on:{click:function(e){return t.$emit("show")}}},[i("van-icon",{attrs:{name:"bars"}})],1):t._e()])},s=[],a={props:{headerTitle:{type:String,required:!0},backUrl:{type:String}},data:function(){return{currentRoute:""}},methods:{addPaymentMethod:function(){this.$emit("addMethod")},goBack:function(){localStorage.getItem("fromPath");this.backUrl?this.$router.push(this.backUrl):this.$router.go("-1")}},created:function(){this.currentRoute=this.$router.currentRoute.name}},r=a,o=(i("c529"),i("4023")),c=Object(o["a"])(r,n,s,!1,null,"402bacfc",null);e["a"]=c.exports},7746:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"err"},[i("div",{class:t.icon}),i("div",{staticClass:"message"},[t._v(t._s(t.msg))])])},s=[],a={props:{status:{type:Number}},data:function(){return{msg:"",icon:""}},created:function(){this.icon=this.status>1?"nodata":this.status<1?"failed-to-load":"no-network",this.msg=this.status>1?this.$t("NoData"):this.status<1?this.$t("LoadingError"):this.$t("NoNetwork")}},r=a,o=(i("5995"),i("4023")),c=Object(o["a"])(r,n,s,!1,null,"e21403c4",null);e["a"]=c.exports},"80e7":function(t,e,i){"use strict";var n=i("caa1"),s=i.n(n);s.a},adf8:function(t,e,i){},ae5f:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pnlhistory flex-column"},[i("header-name",{attrs:{headerTitle:t.$t("PLHistory")},on:{show:function(e){t.popupShow=!0}}}),i("div",{staticClass:"content flex-column"},[i("van-list",{attrs:{finished:t.finished,"finished-text":t.$t("NoMore")},on:{load:function(e){t.queryMatch(t.originList.length?t.originList[t.originList.length-1].matchTime:1e3*(new Date).getTime())}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.tradList,(function(e,n){return i("van-cell",{key:n},[i("div",{staticClass:"cell-item"},[i("div",{staticClass:"title"},[i("span",{staticClass:"symbol"},[t._v(t._s(t.getSymbol(e.contractId)))]),i("span",{staticClass:"side",class:[t.upDownColor?e.side>0?"bgRed":e.side<0?"bgGreen":"":e.side>0?"bgGreen":e.side<0?"bgRed":""]},[t._v(t._s(e.side>0?t.$t("CloseLong"):t.$t("CloseShort")))])]),i("div",{staticClass:"pnl-qty flex-row"},[i("span",{staticClass:"pnl",class:[t.upDownColor?Number(t.getPnL(e))>0?"colorRed":Number(t.getPnL(e))<0?"colorGreen":"":Number(t.getPnL(e))>0?"colorGreen":Number(t.getPnL(e))<0?"colorRed":""]},[t._v(t._s(t.getPnL(e)>0?"+":"")+t._s(t._f("toFix6")(t.getPnL(e))))]),i("span",{staticClass:"qty"},[t._v("\n              "+t._s(t.$t("ContNumer"))+":"+t._s(e.matchQty)+"\n            ")])]),i("div",{staticClass:"time-price flex-row"},[i("span",{staticClass:"time flex-row"},[i("van-icon",{staticClass:"time-icon",attrs:{name:"underway-o"}}),t._v(t._s(t.getTime(e.matchTime)))],1),i("span",{staticClass:"price"},[t._v(t._s(t.$t("SelectOrderPrice"))+": "+t._s(t.getFloatByPriceTick(e.matchPrice,e.contractId)))])])])])})),1)],1),i("van-popup",{staticClass:"popup",attrs:{position:"right"},model:{value:t.popupShow,callback:function(e){t.popupShow=e},expression:"popupShow"}},[i("div",{staticClass:"filter flex-column"},[i("div",{staticClass:"title"},[i("span",[t._v(t._s(t.$t("Filter")))]),i("span",{staticClass:"close-icon"},[i("van-icon",{attrs:{name:"cross"},on:{click:function(e){t.popupShow=!1}}})],1)]),i("div",{staticClass:"filter-content"},[i("div",{staticClass:"time"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("ByTime"))+":")]),i("div",{staticClass:"time-list"},t._l(t.timeList,(function(e,n){return i("div",{key:n,staticClass:"item",on:{click:function(e){return t.timeFilter(n)}}},[i("span",[t._v(t._s(t.$t(e.label)))]),i("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.timeIndex===n,expression:"timeIndex === index"}],attrs:{name:"success"}})],1)})),0)]),i("div",{staticClass:"side"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("BySide"))+":")]),i("div",{staticClass:"side-list"},t._l(t.sideList,(function(e,n){return i("div",{key:n,staticClass:"item",on:{click:function(e){return t.setSide(n)}}},[i("span",[t._v(t._s(t.$t(e.label)))]),i("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.sideIndex===n,expression:"sideIndex === index"}],attrs:{name:"success"}})],1)})),0)])]),i("div",{staticClass:"bottom"},[i("van-button",{staticClass:"reset",attrs:{type:"default"},on:{click:t.reset}},[t._v(t._s(t.$t("Reset")))]),i("van-button",{staticClass:"confirm",attrs:{type:"default"},on:{click:t.confirm}},[t._v(t._s(t.$t("ConfirmTxt")))])],1)])])],1)},s=[],a=i("68f1"),r=i("71c2"),o=i("7746"),c=i("79ec"),l=i("ae8c");function d(t){return h(t)||f(t)||m(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t,e){if(t){if("string"===typeof t)return p(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?p(t,e):void 0}}function f(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function h(t){if(Array.isArray(t))return p(t)}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function b(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(Object(i),!0).forEach((function(e){g(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function g(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var y={components:{headerName:r["a"],noData:o["a"]},data:function(){return{upDownColor:Number(localStorage.getItem("upDownColorIndex"))||0,popupShow:!1,active:0,contractIndex:0,timeIndex:0,sideIndex:0,timeList:[{label:"All"},{label:"OneDay"},{label:"AWeek"},{label:"AMonth"}],sideList:[{label:"All"},{label:"Buy/Long"},{label:"Sell/Short"}],originList:[],loading:!1,finished:!1,indexConrtactId:void 0,startTime:void 0,endTime:void 0,side:void 0,userInfo:localStorage.getItem("userInformation")?JSON.parse(localStorage.getItem("userInformation")):{}}},computed:b(b(b({},Object(l["e"])("futures",["futureAllIndicator","contractObj"])),Object(l["c"])("futures",["getFloatByPriceTick"])),{},{contractList:function(){return[{symbol:"All"}].concat(d(this.futureAllIndicator))},tradList:function(){var t=this,e=[];return e=this.side?this.originList.filter((function(e){return e.side===t.side&&0!==t.getPnL(e)})):this.originList.filter((function(e){return 0!==t.getPnL(e)})),e}}),mounted:function(){setTimeout((function(){window.scrollTo(0,10)}),100)},methods:{queryMatch:function(t,e){var i=this,n={contractId:this.indexConrtactId,startTime:this.startTime,endTime:t||1e3*(new Date).getTime(),pageSize:30,side:1};Object(a["t"])({params:n}).then((function(t){0===t.data.code&&(i.originList=e?t.data.data:[].concat(d(i.originList),d(t.data.data)),i.loading=!1,t.data.data.length<30?i.finished=!0:i.finished=!1)}))},getPnL:function(t){return t.bidUserId===this.userInfo.id?t.bidPnl?Number(t.bidPnl):0:t.askPnl?Number(t.askPnl):0},getSymbol:function(t){return this.contractObj[t].symbol},getTime:function(t){var e=t/1e3,i=new Date((new Date).toLocaleDateString()).getTime(),n=e-i;return n>0?"".concat(this.$t("Today")).concat(Object(c["dateFormatHHMM"])(e)):n<0&&n+864e5>0?"".concat(this.$t("Yesterday")).concat(Object(c["dateFormatHHMM"])(e)):Object(c["dateFormatMDHM"])(e)},timeFilter:function(t){switch(this.timeIndex=t,t){case 0:this.startTime=void 0,this.endTime=1e3*(new Date).getTime();break;case 1:this.endTime=1e3*(new Date).getTime(),this.startTime=1e3*(new Date).getTime()-864e8;break;case 2:this.endTime=1e3*(new Date).getTime(),this.startTime=1e3*(new Date).getTime()-6048e8;break;case 3:this.endTime=1e3*(new Date).getTime(),this.startTime=1e3*(new Date).getTime()-2592e9;break;default:break}},setContractId:function(t,e){this.indexConrtactId=t.contractId,this.contractIndex=e},setSide:function(t){this.sideIndex=t},reset:function(){var t=this;this.indexConrtactId=void 0,this.side=void 0,this.startTime=void 0,this.endTime=1e3*(new Date).getTime(),this.sideIndex=0,this.contractIndex=0,this.timeIndex=0,this.queryMatch(this.endTime,!0),this.$nextTick((function(){t.popupShow=!1}))},confirm:function(){var t=this;this.sideIndex>0?this.side=1===this.sideIndex?1:-1:this.side=void 0,this.queryMatch(this.endTime,!0),this.$nextTick((function(){t.popupShow=!1}))}}},w=y,C=(i("bd7e"),i("80e7"),i("4023")),_=Object(C["a"])(w,n,s,!1,null,"0cfbd991",null);e["default"]=_.exports},bd7e:function(t,e,i){"use strict";var n=i("50d3"),s=i.n(n);s.a},c529:function(t,e,i){"use strict";var n=i("1407"),s=i.n(n);s.a},caa1:function(t,e,i){}}]);