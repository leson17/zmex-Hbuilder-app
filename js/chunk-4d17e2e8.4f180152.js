(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d17e2e8"],{1407:function(t,e,a){},5995:function(t,e,a){"use strict";var s=a("adf8"),i=a.n(s);i.a},"5c64":function(t,e,a){},"71c2":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("div",{staticClass:"back",on:{click:function(e){return e.stopPropagation(),t.goBack(e)}}},[a("span",{staticClass:"left-arrow"})]),a("span",{staticClass:"title"},[t._v(t._s(t.headerTitle))]),"paymentMethod"===t.currentRoute?a("span",{staticClass:"add-payment-method",on:{click:t.addPaymentMethod}},[t._v(t._s(t.$t("AddPaymentMethod")))]):t._e(),"PnLHistory"===t.currentRoute?a("span",{staticClass:"pnl-icon",on:{click:function(e){return t.$emit("show")}}},[a("van-icon",{attrs:{name:"bars"}})],1):t._e()])},i=[],r={props:{headerTitle:{type:String,required:!0},backUrl:{type:String}},data:function(){return{currentRoute:""}},methods:{addPaymentMethod:function(){this.$emit("addMethod")},goBack:function(){localStorage.getItem("fromPath");this.backUrl?this.$router.push(this.backUrl):this.$router.go("-1")}},created:function(){this.currentRoute=this.$router.currentRoute.name}},n=r,o=(a("c529"),a("4023")),c=Object(o["a"])(n,s,i,!1,null,"402bacfc",null);e["a"]=c.exports},7746:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"err"},[a("div",{class:t.icon}),a("div",{staticClass:"message"},[t._v(t._s(t.msg))])])},i=[],r={props:{status:{type:Number}},data:function(){return{msg:"",icon:""}},created:function(){this.icon=this.status>1?"nodata":this.status<1?"failed-to-load":"no-network",this.msg=this.status>1?this.$t("NoData"):this.status<1?this.$t("LoadingError"):this.$t("NoNetwork")}},n=r,o=(a("5995"),a("4023")),c=Object(o["a"])(n,s,i,!1,null,"e21403c4",null);e["a"]=c.exports},adbb:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"entrust-history-bd"},[a("header-name",{attrs:{headerTitle:"历史委托",backUrl:"/contract"}}),a("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.refresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[a("div",{staticClass:"list-box"},[a("van-list",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{finished:t.finished,"finished-text":t.$t("NoMore"),"immediate-check":!1},on:{load:t.onLoad},model:{value:t.Loading,callback:function(e){t.Loading=e},expression:"Loading"}},t._l(t.listDatas,(function(e,s){return a("div",{key:s,staticClass:"list",on:{click:function(a){return t.$router.push("/contract/entrustDetails?clOrderId="+e.clOrderId)}}},[a("div",{staticClass:"list-title flex-row"},[a("div",{staticClass:"name"},[t._v("\n              "+t._s(t.contractObj[e.contractId].symbol)+"\n              "),a("span",{staticClass:"Simulation"},[t._v(t._s(999999===e.contractId?t.$t("Simulation"):""))])]),a("div",{staticClass:"full"},[1===Number(e.side)?a("span",{staticClass:"bgGreen"},[t._v(t._s(t.showOrderType(e)))]):a("span",{staticClass:"bgRed"},[t._v(t._s(t.showOrderType(e)))])]),a("div",{staticClass:"transaction-status"},[3===e.orderStatus?a("span",{staticClass:"colorGreen"},[t._v("部分成交")]):t._e(),4===e.orderStatus?a("span",{staticClass:"colorGreen"},[t._v("全部成交")]):t._e(),5===e.orderStatus?a("span",{staticClass:"colorRed"},[t._v("部分撤单")]):t._e(),6===e.orderStatus?a("span",{staticClass:"colorRed"},[t._v("全部撤单")]):t._e(),7===e.orderStatus?a("span",{staticClass:"colorRed"},[t._v("撤单中")]):t._e(),8===e.orderStatus?a("span",{staticClass:"colorRed"},[t._v("失效")]):t._e()]),a("div",{staticClass:"arrow-left"})]),a("div",{staticClass:"data"},[a("div",{staticClass:"flex-row top"},[a("div",{staticClass:"l"},[a("div",{staticClass:"title"},[t._v("委托数量(张)")]),a("div",{staticClass:"number"},[t._v(t._s(t._f("toFix6")(e.quantity)))])]),a("div",{staticClass:"m"},[a("div",{staticClass:"title"},[t._v("委托价格")]),a("div",{staticClass:"number"},[t._v(t._s(1===e.orderType?t.getFloatByPriceTick(e.price,e.contractId):t.$t("MarketPrice")))])]),a("div",{staticClass:"r"},[a("div",{staticClass:"title"},[t._v("成交均价")]),a("div",{staticClass:"number"},[t._v(t._s(t.getFloatByPriceTick(e.dealPrice,e.contractId)))])])]),a("div",{staticClass:"flex-row"},[a("div",{staticClass:"l"},[a("div",{staticClass:"title"},[t._v("成交数量(张)")]),a("div",{staticClass:"number"},[t._v(t._s(t._f("toFix6")(e.filledQuantity)))])]),a("div",{staticClass:"m"},[a("div",{staticClass:"title"},[t._v("委托类型")]),1===e.orderType?a("div",{staticClass:"number"},[t._v("限价")]):t._e(),3===e.orderType?a("div",{staticClass:"number"},[t._v("市价")]):t._e()]),a("div",{staticClass:"r"},[a("div",{staticClass:"title"},[t._v("开平方向")]),a("div",{staticClass:"number"},[t._v(t._s(1===e.positionEffect?"开仓":"平仓"))])])]),a("div",{staticClass:"flex-row time"},[a("van-icon",{attrs:{name:"clock-o"}}),t._v(t._s(t.dateFormat(e.timestamp/1e3))+"\n            ")],1)])])})),0)],1),a("noData",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}],attrs:{status:t.noDataStatus}})],1)],1)},i=[],r=a("c97b"),n=a.n(r),o=a("71c2"),c=(a("dee9"),a("ae8c")),l=a("7746"),d=a("79ec");function u(t,e,a,s,i,r,n){try{var o=t[r](n),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(s,i)}function h(t){return function(){var e=this,a=arguments;return new Promise((function(s,i){var r=t.apply(e,a);function n(t){u(r,s,i,n,o,"next",t)}function o(t){u(r,s,i,n,o,"throw",t)}n(void 0)}))}}function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(Object(a),!0).forEach((function(e){p(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var m=a("8a8d"),g={components:{noData:l["a"],headerName:o["a"]},data:function(){return{isLoading:!1,userInfo:JSON.parse(localStorage.getItem("userInformation")),listDatas:[],tempListData:[],noDataStatus:2,show:!0,Loading:!1,finished:!1,queryList:[],hideOtherHoldingHis:Boolean(Number(localStorage.getItem("hideOtherHoldingHis")))||!1,endDate:"",upDownColor:Number(localStorage.getItem("upDownColorIndex"))||0,pageSize:10}},computed:v(v({},Object(c["e"])({contractObj:function(t){var e=t.futures;return e.contractObj},contractId:function(t){var e=t.futures;return e.contractID},historicalRecord:function(t){var e=t.futures;return e.historicalRecord}})),Object(c["c"])("futures",["getCurrencySymbolByCurrencyId","getFloatByPriceTick"])),watch:{hideOtherHoldingHis:function(t){localStorage.setItem("hideOtherHoldingHis",Number(t)),this.filterList(t)}},methods:v(v(v({},Object(c["b"])("futures",["queryHisOrder"])),Object(c["d"])("futures",["SETHISTORICALRECORD","SETENDDATE"])),{},{dateFormat:d["dateFormat"],calcTransactionStatus:function(t){var e=this;if(!t||!t.length)return!1;var a=t;a.map((function(t){var a=Number(t.filledCurrency),s=Number(t.filledQuantity),i=e.contractObj[t.contractId]?new m(e.contractObj[t.contractId].contractUnit):new m(.01);1===e.contractObj[t.contractId].contractSide?t.dealPrice=0===s?0:new m(a).div(new m(s).times(i)):t.dealPrice=0!==a?new m(s).times(i).div(a):0})),this.listDatas=this.listDatas.concat(a),this.SETHISTORICALRECORD(this.listDatas)},filterList:function(t){var e=this;this.listDatas=t?this.listDatas.filter((function(t){return t.contractId===e.contractId})):[].concat(this.historicalRecord)},onLoad:function(){var t=this;if(this.listDatas.length<this.pageSize&&0!==this.listDatas.length)return this.isLoading=!1,void(this.Loading=!1);var e={endDate:this.endDate||1e3*(new Date).getTime(),pageSize:this.pageSize};this.queryHisOrder(e).then((function(e){0===e.code&&e.data&&e.data.length?(t.endDate=e.data[e.data.length-1].timestamp,t.calcTransactionStatus(e.data)):0===t.listDatas.length&&(t.show=!1),t.isLoading=!1,t.Loading=!1,0===e.data.length&&(t.finished=!0)}))},refresh:function(){var t=this;if(this.listDatas.length<this.pageSize&&0!==this.listDatas.length)this.isLoading=!1;else{var e={endDate:1e3*(new Date).getTime(),pageSize:this.pageSize,side:1};this.queryHisOrder(e).then((function(e){0===e.code&&e.data&&e.data.length&&(t.listDatas=[],t.endDate=e.data[e.data.length-1].timestamp,t.calcTransactionStatus(e.data)),t.isLoading=!1}))}},showOrderType:function(t){var e=Number(t.positionEffect),a=Number(t.side),s="";return 1===e?s=a>0?this.$t("OpenLong"):this.$t("OpenShort"):2===e&&(s=a>0?this.$t("CloseLong"):this.$t("CloseShort")),s},getPnl:function(t){return t.askUserId===this.userInfo.id?t.askPnl:t.bidPnl},getFree:function(t){return 1===t.orderType?t.makerFeeRatio:t.takerFeeRatio},matchType:function(t){return t.askUserId===this.userInfo.id?t.askMatchType:t.bidMatchType},getPositionEffect:function(t){return t.askUserId===this.userInfo.id?t.askPositionEffect:t.bidPositionEffect}}),created:function(){var t=h(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.listDatas=[],t.next=3,this.refresh();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},b=g,C=(a("d467"),a("4023")),_=Object(C["a"])(b,s,i,!1,null,"6bc59790",null);e["default"]=_.exports},adf8:function(t,e,a){},c529:function(t,e,a){"use strict";var s=a("1407"),i=a.n(s);i.a},d467:function(t,e,a){"use strict";var s=a("5c64"),i=a.n(s);i.a}}]);