(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["antiPhishingCode"],{"040c":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rest-password"},[i("header-name",{attrs:{headerTitle:t.headerTitle}}),i("div",{staticClass:"form"},[i("div",{staticClass:"lable account"},[t._v(t._s(t.$t("AntiPhishingCode")))]),i("div",{staticClass:"account-input"},[i("cube-input",{staticClass:"account-input-text",attrs:{placeholder:t.$t("InputAntiFishingCode")},model:{value:t.antiPhishingCode,callback:function(e){t.antiPhishingCode=e},expression:"antiPhishingCode"}}),i("cube-validator",{ref:"antiPhishingCode",attrs:{model:t.antiPhishingCode,rules:t.antiPhishingCodeRules},model:{value:t.result[0],callback:function(e){t.$set(t.result,0,e)},expression:"result[0]"}})],1),i("div",{staticClass:"lable"},[t._v(t._s(t.$t("Code")))]),i("div",{staticClass:"code"},[i("cube-input",{staticClass:"code-input",attrs:{placeholder:t.$t("YourCode")},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),i("cube-validator",{ref:"code",attrs:{model:t.code,rules:t.codeRules},model:{value:t.result[1],callback:function(e){t.$set(t.result,1,e)},expression:"result[1]"}}),i("cube-button",{staticClass:"get-code",class:{"can-click":t.canClick},on:{click:t.getCode}},[t._v(t._s(t.codeTxt))])],1)]),i("div",{staticClass:"btn",class:{"btn-submit":t.canSubmit},on:{click:t.submit}},[t._v(t._s(t.$t("Link")))])],1)},s=[],o=i("ae8c"),c=i("71c2"),a=i("1d2f");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){l(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d={components:{headerName:c["a"]},data:function(){return{result:[void 0,void 0,void 0],antiPhishingCode:"",code:"",totalTime:60,codeTxt:this.$t("GetCode"),canClick:!0,canSubmit:!1,antiPhishingCodeRules:{fishingCode:!0,required:!0},codeRules:{required:!0},accountType:this.$t("Phone"),headerTitle:this.$t("AntiPhishingCode"),placeholder:"",businessType:"fishingPhone",userInfo:JSON.parse(window.localStorage.getItem("userInformation"))}},methods:u(u(u({},Object(o["b"])("login",["getUserInfo"])),Object(o["b"])("mine",["bindFishingCode","getVerifyCodeAfterAuth"])),{},{submit:function(){var t=this,e=this.$refs.antiPhishingCode.validate(),i=this.$refs.code.validate();Promise.all([e,i]).then((function(e){if(e.some((function(t){return!1===t})))return t.$notify({message:t.$t("FillFormCorrectly")}),!1;var i={fishingCode:t.antiPhishingCode,businessType:t.businessType,validCode:t.code};t.bindFishingCode(i).then((function(i){0===i.code?t.getUserInfo().then((function(e){localStorage.setItem("userInformation",JSON.stringify(e)),t.$notify({message:t.$t("BindSuccessfully"),duration:1e3,background:"#1989fa"}),setTimeout((function(){t.$router.push("/mine/securityCenter")}),1e3)})):console.log(e.msg)})).catch((function(t){console.log(t)}))}))},getCode:function(){var t=this;this.canClick&&this.getVerifyCodeAfterAuth({businessType:this.businessType,receiver:this.userInfo.phone?this.userInfo.phone:this.userInfo.email}).then((function(e){0===e.code&&(t.countDown(),console.log("发送成功!"))}))},countDown:function(){var t=this;this.canClick&&(this.canClick=!1),this.codeTxt="".concat(this.totalTime,"s"),window.setTimeout((function(){t.totalTime-=1,t.totalTime>0?t.countDown():0===t.totalTime&&(t.codeTxt=t.$t("GetCode"),t.canClick=!0,t.totalTime=60)}),1e3)},checkFullFillIn:function(){this.antiPhishingCode&&this.code?this.canSubmit=!0:this.canSubmit=!1},beforeClose:function(){this.$router.push("/login")}}),computed:u({},Object(o["e"])({})),watch:{antiPhishingCode:function(){this.checkFullFillIn()},code:function(){this.checkFullFillIn()}},created:function(){this.userInfo.phone?this.businessType="fishingPhone":this.businessType="fishingEmail",this.antiPhishingCode=this.userInfo.avoidFishingCode,a["a"].addRule("fishingCode",(function(t){return"string"===typeof t&&/^[\d_a-zA-Z]{6,32}$/.test(t)})),a["a"].addMessage("fishingCode",this.$t("FishPwdMsg"))}},h=d,f=(i("83e2"),i("54f3"),i("4023")),b=Object(f["a"])(h,n,s,!1,null,"2ebdf0c6",null);e["default"]=b.exports},1407:function(t,e,i){},"2b06a":function(t,e,i){},"45a1":function(t,e,i){},"54f3":function(t,e,i){"use strict";var n=i("2b06a"),s=i.n(n);s.a},"71c2":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"head"},[i("div",{staticClass:"back",on:{click:function(e){return e.stopPropagation(),t.goBack(e)}}},[i("span",{staticClass:"left-arrow"})]),i("span",{staticClass:"title"},[t._v(t._s(t.headerTitle))]),"paymentMethod"===t.currentRoute?i("span",{staticClass:"add-payment-method",on:{click:t.addPaymentMethod}},[t._v(t._s(t.$t("AddPaymentMethod")))]):t._e(),"PnLHistory"===t.currentRoute?i("span",{staticClass:"pnl-icon",on:{click:function(e){return t.$emit("show")}}},[i("van-icon",{attrs:{name:"bars"}})],1):t._e()])},s=[],o={props:{headerTitle:{type:String,required:!0},backUrl:{type:String}},data:function(){return{currentRoute:""}},methods:{addPaymentMethod:function(){this.$emit("addMethod")},goBack:function(){localStorage.getItem("fromPath");this.backUrl?this.$router.push(this.backUrl):this.$router.go("-1")}},created:function(){this.currentRoute=this.$router.currentRoute.name}},c=o,a=(i("c529"),i("4023")),r=Object(a["a"])(c,n,s,!1,null,"402bacfc",null);e["a"]=r.exports},"83e2":function(t,e,i){"use strict";var n=i("45a1"),s=i.n(n);s.a},c529:function(t,e,i){"use strict";var n=i("1407"),s=i.n(n);s.a}}]);