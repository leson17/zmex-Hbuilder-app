(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["confirmPhoneNum"],{1407:function(e,t,n){},"1bfd":function(e,t,n){"use strict";var o=n("2264"),i=n.n(o);i.a},2264:function(e,t,n){},"3feb":function(e,t,n){},"71c2":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"head"},[n("div",{staticClass:"back",on:{click:function(t){return t.stopPropagation(),e.goBack(t)}}},[n("span",{staticClass:"left-arrow"})]),n("span",{staticClass:"title"},[e._v(e._s(e.headerTitle))]),"paymentMethod"===e.currentRoute?n("span",{staticClass:"add-payment-method",on:{click:e.addPaymentMethod}},[e._v(e._s(e.$t("AddPaymentMethod")))]):e._e(),"PnLHistory"===e.currentRoute?n("span",{staticClass:"pnl-icon",on:{click:function(t){return e.$emit("show")}}},[n("van-icon",{attrs:{name:"bars"}})],1):e._e()])},i=[],c={props:{headerTitle:{type:String,required:!0},backUrl:{type:String}},data:function(){return{currentRoute:""}},methods:{addPaymentMethod:function(){this.$emit("addMethod")},goBack:function(){localStorage.getItem("fromPath");this.backUrl?this.$router.push(this.backUrl):this.$router.go("-1")}},created:function(){this.currentRoute=this.$router.currentRoute.name}},a=c,s=(n("c529"),n("4023")),r=Object(s["a"])(a,o,i,!1,null,"402bacfc",null);t["a"]=r.exports},"9e6e":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rest-password"},[n("header-name",{attrs:{headerTitle:e.headerTitle,backUrl:this.from?this.from:"/mine/securityCenter"}}),n("div",{staticClass:"form"},[n("div",{staticClass:"lable account"},[e._v(e._s(e.accountType))]),n("div",{staticClass:"account-input"},[n("cube-select",{directives:[{name:"show",rawName:"v-show",value:e.select,expression:"select"}],attrs:{options:e.codeOptions},model:{value:e.areaCode,callback:function(t){e.areaCode=t},expression:"areaCode"}}),n("cube-input",{staticClass:"account-input-text",attrs:{placeholder:e.placeholder},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}}),n("cube-validator",{ref:"account",attrs:{model:e.account,rules:e.accountRules},model:{value:e.result[0],callback:function(t){e.$set(e.result,0,t)},expression:"result[0]"}})],1),n("div",{staticClass:"lable"},[e._v(e._s(e.$t("Code")))]),n("div",{staticClass:"code"},[n("cube-input",{staticClass:"code-input",attrs:{placeholder:e.$t("YourCode")},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),n("cube-validator",{ref:"code",attrs:{model:e.code,rules:e.codeRules},model:{value:e.result[1],callback:function(t){e.$set(e.result,1,t)},expression:"result[1]"}}),n("cube-button",{staticClass:"get-code",class:{"can-click":e.canClick},on:{click:e.getCode}},[e._v(e._s(e.codeTxt))])],1)]),n("div",{staticClass:"btn",class:{"btn-submit":e.canSubmit},on:{click:e.submit}},[e._v(e._s(e.$t("Link")))])],1)},i=[],c=n("ae8c"),a=n("1d2f"),s=n("71c2"),r=n("ff51");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={components:{headerName:s["a"]},data:function(){return{result:[void 0,void 0,void 0],areaCode:Object(r["a"])()[0].value,select:!0,account:"",code:"",totalTime:60,businessType:"",codeOptions:Object(r["a"])(),codeTxt:this.$t("GetCode"),canClick:!0,canSubmit:!1,accountRules:{type:"email",required:!0},codeRules:{required:!0},accountType:this.$t("Phone"),headerTitle:"",placeholder:"",userInfo:JSON.parse(window.localStorage.getItem("userInformation"))}},methods:l(l(l({},Object(c["b"])("mine",["bindEmailOrPhone","getVerifyCodeAfterAuth"])),Object(c["b"])("login",["getUserInfo"])),{},{submit:function(){var e=this,t=this.$refs.account.validate(),n=this.$refs.code.validate();Promise.all([t,n]).then((function(t){var n={};"bindPhonePhone"===e.businessType?(n.receiver=e.account,n.businessType="bindPhonePhone",n.verifyCode=e.code,n.areaCode=e.areaCode):(n.receiver=e.account,n.businessType="bindEmailEmail",n.verifyCode=e.code);e.bindEmailOrPhone(n).then((function(n){0===n.code?(e.getUserInfo().then((function(e){localStorage.setItem("userInformation",JSON.stringify(e))})),e.$notify({message:e.$t("BindSuccessfully"),duration:500,background:"#1989fa"}),setTimeout((function(){e.$router.push(e.from?e.from:"/mine/securityCenter")}),500)):console.log(t.msg)}))}))},getCode:function(){var e=this,t=this.$refs.account.validate();t.then((function(t){if(t){if(!e.canClick)return;var n={businessType:e.businessType,receiver:e.account};"bindPhonePhone"===e.businessType&&(n.areaCode=e.areaCode),e.getVerifyCodeAfterAuth(n).then((function(t){0===t.code&&(e.countDown(),console.log("发送成功!"))}))}})).catch((function(e){console.log(e)}))},countDown:function(){var e=this;this.canClick&&(this.canClick=!1),this.codeTxt="".concat(this.totalTime,"s"),window.setTimeout((function(){e.totalTime-=1,e.totalTime>0?e.countDown():0===e.totalTime&&(e.codeTxt=e.$t("GetCode"),e.canClick=!0,e.totalTime=60)}),1e3)},checkFullFillIn:function(){this.account&&this.code?this.canSubmit=!0:this.canSubmit=!1},beforeClose:function(){this.$router.push("/login")}}),computed:{from:function(){return this.$route.query.from}},watch:{account:function(){this.checkFullFillIn()},code:function(){this.checkFullFillIn()}},created:function(){a["a"].addRule("phone",(function(e){return"string"===typeof e&&/^\d{6,11}$/.test(e)})),a["a"].addRule("email",(function(e){return"string"===typeof e&&""!==e&&/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e)})),a["a"].addMessage("email",this.$t("EmailMsg")),a["a"].addMessage("phone",this.$t("PhoneMsg")),a["a"].addRule("email",(function(e){return"string"===typeof e&&""!==e&&/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e)})),a["a"].addMessage("email",this.$t("EmailMsg")),"phone"===this.$route.params.id?(this.accountType=this.$t("Phone"),this.headerTitle=this.$t("SMSAuthentication"),this.businessType="bindPhonePhone",this.select=!0,this.placeholder=this.$t("YourPhone"),this.accountRules={required:!0,phone:!0}):"email"===this.$route.params.id&&(this.accountType=this.$t("Email"),this.headerTitle=this.$t("EmailAuthentication"),this.businessType="bindEmailEmail",this.select=!1,this.placeholder=this.$t("YourEmail"),this.accountRules={required:!0,email:!0})}},f=h,m=(n("1bfd"),n("f473"),n("4023")),p=Object(m["a"])(f,o,i,!1,null,"1050f639",null);t["default"]=p.exports},c529:function(e,t,n){"use strict";var o=n("1407"),i=n.n(o);i.a},f473:function(e,t,n){"use strict";var o=n("3feb"),i=n.n(o);i.a}}]);