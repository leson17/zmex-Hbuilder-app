(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35b08faa"],{"0b47":function(t,a,r){"use strict";r.r(a);var e=function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"add-address"},[r("van-nav-bar",{attrs:{title:t.$t("FundsTransfer"),"left-arrow":""},on:{"click-left":t.goBack}},[r("div",{staticClass:"right",attrs:{slot:"right"},slot:"right"},[r("router-link",{attrs:{to:"/assets/transfer_his"}},[r("div",{staticClass:"nav-right"})])],1)]),r("div",{staticClass:"main"},[r("div",{staticClass:"exchange"},[r("div",{staticClass:"left"},[r("div",{staticClass:"top"},[t._m(0),r("div",{staticClass:"two"},[t._v(t._s(t.$t("From")))]),r("div",{staticClass:"three"},[r("div",{staticClass:"select"},[r("cube-select",{attrs:{title:t.$t("Accounts"),options:t.appList,placeholder:t.placeholder,"auto-pop":t.autoPop,disabled:t.disabled},on:{change:t.changeFrom},model:{value:t.params.fromApplId,callback:function(a){t.$set(t.params,"fromApplId",a)},expression:"params.fromApplId"}})],1)])]),r("div",{staticClass:"bottom"},[t._m(1),r("div",{staticClass:"two"},[t._v(t._s(t.$t("To")))]),r("div",{staticClass:"three"},[r("div",{staticClass:"select"},[r("cube-select",{attrs:{title:t.$t("Accounts"),options:t.appList,placeholder:t.placeholder,"auto-pop":t.autoPop,disabled:t.disabled},on:{change:t.changeTo},model:{value:t.params.toApplId,callback:function(a){t.$set(t.params,"toApplId",a)},expression:"params.toApplId"}})],1)])])]),r("div",{staticClass:"right"},[r("div",{staticClass:"back",on:{click:t.exchange}})])]),r("div",{staticClass:"label"},[t._v(t._s(t.$t("Currency")))]),r("div",{staticClass:"select input"},[r("cube-select",{attrs:{title:t.title,options:t.showCurrencyList,placeholder:t.placeholder,"auto-pop":t.autoPop,disabled:t.disabled},on:{change:t.change},model:{value:t.params.currencyId,callback:function(a){t.$set(t.params,"currencyId",a)},expression:"params.currencyId"}})],1),r("div",{staticClass:"label"},[t._v(t._s(t.$t("Quantity")))]),r("div",{staticClass:"input coin-value"},[r("van-field",{attrs:{type:"number",maxlength:"20",center:"",placeholder:t.minTransfer?t.$t("MinimumTransfer")+t.minTransfer:t.$t("InputTransferAmount")},on:{input:t.oninput},model:{value:t.params.amount,callback:function(a){t.$set(t.params,"amount",a)},expression:"params.amount"}},[r("div",{attrs:{slot:"button"},slot:"button"},[t._v("\n          "+t._s(t.currencySymbol)+" |\n          "),r("span",{on:{click:t.setFullNum}},[t._v(t._s(t.$t("All")))])])])],1),r("div",{staticClass:"small"},[t._v(t._s(t.$t("Available"))+t._s(t._f("toFix8")(t.available))+" "+t._s(t.currencySymbol))]),r("div",{staticClass:"charge-submit"},[r("van-button",{staticClass:"btn",class:{"btn-submit":Number(t.params.amount)&&Number(t.available)>=Number(t.params.amount)&&Number(t.minTransfer)<=Number(t.params.amount)},on:{click:t.doTransfer}},[t._v("\n        "+t._s(t.$t("Transfer"))+"\n      ")])],1)])],1)},s=[function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"one"},[r("div",{staticClass:"dot"})])},function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"one"},[r("div",{staticClass:"dot"})])}],n=r("ae8c"),i=r("ff51");r("2934"),r("79ec");function c(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);a&&(e=e.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),r.push.apply(r,e)}return r}function l(t){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?c(Object(r),!0).forEach((function(a){u(t,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))}))}return t}function u(t,a,r){return a in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}var o={data:function(){return{maxlength:100,indicator:{negative:!0,remain:!0},num:"",currencyId:this.$route.params.currencyId||7,description:"",title:this.$t("Currency"),placeholder:this.$t("SelectCurrency"),autoPop:!1,disabled:!1,interval:"",intervalTime:10,transferId:"",params:{amount:"",currencyId:this.$route.params.currencyId||7,fromApplId:2===this.$route.params.type?2:5,toApplId:2===this.$route.params.type?5:2},available:0,minTransfer:0,uuid:"",fromPath:"/"}},computed:l(l({},Object(n["e"])("assets",["currencyList"])),{},{appList:function(){var t=[{text:this.$t("MyWallet"),value:5},{text:this.$t("FuturesAccount"),value:2},{text:this.$t("ActivityAccount"),value:10}];return t},showCurrencyList:function(){var t=this;if(0===this.currencyList.length)return[];var a=[];if(a=this.currencyList.filter((function(a){var r=a.transferApplList;return r.find((function(a){return a==t.params.fromApplId}))&&r.find((function(a){return a==t.params.toApplId}))})),a.length>0){var r=a.find((function(a){return a.currencyId==t.params.currencyId}));r||(this.params.currencyId=a[0].currencyId)}return a.forEach((function(t){t.value=t.currencyId,t.text=t.symbol})),a},currencySymbol:{get:function(){var t=this;return this.currencyList.length>0?this.currencyList.find((function(a){return a.currencyId===t.params.currencyId})).symbol:"ETH"},set:function(t){console.log(t,"set currencySymbol")}}}),watch:{"params.fromApplId":function(t){this.initAvailable(t)},"params.currencyId":function(){this.initAvailable()}},beforeDestroy:function(){clearInterval(this.interval),this.interval=null},methods:l(l(l({},Object(n["b"])("assets",["getAssetAccount","createWithdrawWallet","transfer","transferCheck","futureAssetTransfer","futureAssetCheck","minTransferOut","queryAllCurrency"])),Object(n["b"])("futures",["futureQueryAvail"])),{},{goBack:function(){this.$router.go(-1)},oninput:function(){var t=this,a=this.currencyList.find((function(a){return a.currencyId===t.params.currencyId}));2===a.currencyType?this.params.amount=this.params.amount.match(/^\d{0,8}/g)[0]||null:this.params.amount=this.params.amount.match(/^\d*(\.?\d{0,6}|\D)/g)[0]||null},change:function(t,a,r){this.currencySymbol=r,this.currencyId=this.params.currencyId,this.initAvailable()},changeFrom:function(t){t===this.params.toApplId&&(this.params.toApplId=this.appList.find((function(a){return a.value!==t})).value)},changeTo:function(t){t===this.params.fromApplId&&(this.params.fromApplId=this.appList.find((function(a){return a.value!==t})).value)},exchange:function(){var t=[this.params.toApplId,this.params.fromApplId];this.params.fromApplId=t[0],this.params.toApplId=t[1]},doTransfer:function(){var t=this;this.uuid=Object(i["j"])(),this.params.amount<=0?this.$toast(this.$t("GreaterThanZero")):2===this.params.fromApplId||2===this.params.toApplId||10===this.params.fromApplId||10===this.params.toApplId?this.futureAssetTransfer({params:this.params,headers:{unique:this.uuid}}).then((function(a){t.uuid=Object(i["j"])(),0===a.data.code&&(t.$toast.loading({mask:!0,duration:0,message:t.$t("Transfering")}),t.transferId=a.data.data,t.interval=setInterval(t.doFutureTransferCheck,1e3))})):this.transfer({params:this.params,headers:{unique:this.uuid}}).then((function(a){t.uuid=Object(i["j"])(),0===a.data.code&&(t.$toast.loading({mask:!0,duration:0,message:t.$t("Transfering")}),t.transferId=a.data.data,t.interval=setInterval(t.doTransferCheck,1e3))}))},doTransferCheck:function(){var t=this;this.intervalTime<0&&(clearInterval(this.interval),this.$toast.clear()),this.intervalTime-=1,this.transferCheck({params:{transferId:this.transferId}}).then((function(a){1===a.data.code&&(clearInterval(t.interval),t.$toast.clear(),t.$toast(t.$t("TransferSuccessfully")),t.$router.push("/assets")),2===a.data.code&&(clearInterval(t.interval),t.$toast.clear(),t.$toast(t.$t("Failure"))),t.initAvailable()}))},doFutureTransferCheck:function(){var t=this;this.intervalTime<0&&(clearInterval(this.interval),this.$toast.clear()),this.intervalTime-=1,this.futureAssetCheck({params:{transferId:this.transferId,fromApplId:this.params.fromApplId,toApplId:this.params.toApplId}}).then((function(a){1===a.data.code&&(clearInterval(t.interval),t.$toast.clear(),t.$toast(t.$t("TransferSuccessfully")),t.$router.push("/assets")),2===a.data.code&&(clearInterval(t.interval),t.$toast.clear(),t.$toast(t.$t("Failure"))),t.initAvailable()}))},setFullNum:function(){if(this.available.toString().indexOf(".")>0){var t=this.available.toString().split(".");if(t[1]&&t[1].length>6){var a="".concat(t[0],".").concat(t[1].substring(0,6));this.params.amount=a>0?a:0}else this.params.amount=this.available>0?this.available:0}else this.params.amount=this.available>0?this.available:0},initAvailable:function(){var t=this,a=this.params.fromApplId;5===a&&this.getAssetAccount().then((function(a){var r=a.data.data.find((function(a){return a.currencyId===t.currencyId}));t.available=r?r.available:0})),2!==a&&10!==a&&1!==a||this.futureQueryAvail({applId:this.params.fromApplId}).then((function(a){var r=a.data.find((function(a){return a.currencyId===t.currencyId}));t.available=r?r.available:0})),this.minTransferOut({params:{applId:a,currencyId:this.currencyId}}).then((function(a){0===a.data.code&&(t.minTransfer=a.data.data)}))},initParamsFromFuture:function(){var t=this.$route.params;2===t.type&&(this.params.fromApplId=2,this.params.toApplId=5)}}),created:function(){this.queryAllCurrency(),this.initAvailable(),this.initParamsFromFuture()}},p=o,d=(r("0ff9"),r("ea15"),r("4023")),h=Object(d["a"])(p,e,s,!1,null,"78b5e07a",null);a["default"]=h.exports},"0ff9":function(t,a,r){"use strict";var e=r("9138"),s=r.n(e);s.a},8937:function(t,a,r){},9138:function(t,a,r){},ea15:function(t,a,r){"use strict";var e=r("8937"),s=r.n(e);s.a}}]);